# バックログ（優先度つき）

優先度: P0（必須/MVP）> P1（MVP後すぐ）> P2（後続）

## エピック一覧

- P0 認証/招待（リンク/QR）
- P0 出退勤（login/simple切替・位置半径）
- P0 シフト提出/確認（ok/ng・単日＋一括適用）
- P0 従業員管理（基本情報・アカウント紐付け）
- P0 店舗設定（座標コピペ・基本ルール）
- P0 勤怠管理（手動編集・CSV出力）
- P1 公開登録/Stripe Checkout/招待コード
- P1 運営（店舗一覧/招待コード管理）
- P1 開発者ツール（招待リンク、設定エクスポート）
- P2 AI自動シフト生成（Gemini）
- P2 住所検索＋地図ピン調整、DnD、楽観ロック、RLS強化

## ユーザーストーリー（抜粋）

### 認証/招待（P0）
- 管理者として、従業員にメールがなくても、QR/リンクでオンボードさせたい
  - 受け入れ基準: 24h/72h/7dのリンク生成・コピー・QR表示・失効ができる

### 出退勤（P0）
- 従業員として、店舗半径内で出勤/退勤ができ、退勤時に休憩分を入力できる
  - 受け入れ基準: 半径内でのみボタン有効、退勤時モーダル（クイック/15分刻み）

### シフト提出/確認（P0）
- 従業員として、ok/ngのみで希望を提出でき、当月の提出率が見える
  - 受け入れ基準: ok時は時間任意、ngは時間非表示、提出後バッジ

### 従業員管理（P0）
- 管理者として、従業員の基本情報を管理し、アカウント状態を制御したい
  - 受け入れ基準: 一覧/編集モーダル、authStatus表示、招待リンク操作

### 店舗設定（P0）
- 管理者として、丸め/猶予/休憩/位置半径/ポジションを設定したい
  - 受け入れ基準: 保存/未保存警告、座標コピペ＋現在地テスト

### 勤怠管理（P0）
- 管理者として、日次/月次を閲覧し必要に応じて修正し、CSV出力したい
  - 受け入れ基準: 編集モーダル、位置OK表示、CSV出力

### 公開登録/請求（P1）
- オーナーとして、登録し（招待コードで無料化可）、請求を完了したい
  - 受け入れ基準: コード有効時はスキップ、無効時はCheckout開始

### 運営（P1）
- 運営として、店舗一覧/招待コードを管理したい
  - 受け入れ基準: 一覧/検索、コードCRUD

## 技術バックログ（抜粋）
- P0 型定義の共通化（types/）とzodバリデーション
- P0 Supabase RLS最小セット（profiles/shift_requests/shifts/attendances）
- P1 ETag/If-Match（店舗設定）
- P1 Stripe webhook冪等化
- P2 Playwright E2E（主要フロー）

## 依存関係
- 出退勤 → 店舗設定（半径/座標）
- シフト作成 → ルールセット/提出
- 招待 → invitationsテーブル/トークンAPI


